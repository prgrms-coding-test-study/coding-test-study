## 👤 작성자
김지수

---

## 🧩 문제 정보
<!-- [문제 제목](문제 링크) 형식으로 작성하세요 -->
[경주로 건설](https://school.programmers.co.kr/tryouts/198626/challenges)

---

## 💭 아이디어
- deque 기반 너비 우선 탐색 활용
- `costs[x][y][direction]` 형태의 3차원 비용 리스트로 방향별 최소 비용 관리

---

## 🧑‍💻 코드
<!-- 작성한 코드를 백틱으로 감싸 넣어주세요 --> 
```python
from collections import deque
from enum import IntEnum

class Direction(IntEnum):
    INIT = -1
    UP = 0
    LEFT = 1
    RIGHT = 2
    DOWN = 3

class Node:
    def __init__(self, x, y, cost, direction):
        self.x = x
        self.y = y
        self.cost = cost
        self.dir = direction

X = 0
Y = 1
WALL = 1
INF = 25 * 25 * 600
DIRS = [(-1, 0), (0, -1), (0, 1), (1, 0)]  ### 상, 좌, 우, 하

def solution(board):
    N = len(board)
    costs = [[[INF] * 4 for _ in range(N)] for _ in range(N)]
    queue = deque()
    start = (0, 0)

    queue.append(Node(start[X], start[Y], 0, Direction.INIT))

    for i in range(4):
        costs[start[X]][start[Y]][i] = 0

    ### 너비 우선 탐색
    while queue:
        curr = queue.popleft()
        x, y, cost, dir = curr.x, curr.y, curr.cost, curr.dir

        ### 상하좌우 탐색
        for i, (dx, dy) in enumerate(DIRS):
            nx, ny = x + dx, y + dy

            if is_out_of_range(N, nx, ny) or board[nx][ny] == WALL:
                continue

            n_dir = to_direction(i)
            n_cost = cost + get_extra_cost(dir, n_dir)

            ### 최소 비용을 갱신할 수 있는 경우
            if costs[nx][ny][i] > n_cost:
                costs[nx][ny][i] = n_cost
                queue.append(Node(nx, ny, n_cost, n_dir))
    
    ### 네 방향 중 최소 비용 찾기
    return min(costs[N - 1][N - 1])

def is_out_of_range(N, x, y):
    return x < 0 or x >= N or y < 0 or y >= N

def is_straight(d1, d2):
    return d1 == Direction.INIT or d2 == Direction.INIT or d1 == d2

def get_extra_cost(d1, d2):
    return 100 if is_straight(d1, d2) else 600

def to_direction(value):
    return Direction(value)
```

---

## ⏰ 복잡도
- 시간 복잡도: O(N^2)
- 공간 복잡도: O(N^2 * 4) -> 3차원 비용 리스트

---

## 📝 회고
- 동일한 위치라도 방향이라는 상태가 다르면 별개의 노드로 간주해야 하는 문제
- 단순한 2차원 리스트로 최소 비용을 관리하면 다른 방향으로 최소 비용을 갱신할 수 있는 경우가 누락됨